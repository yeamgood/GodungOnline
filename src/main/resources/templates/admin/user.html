<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<!-- Meta, title, CSS, favicons, etc. -->
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">

<title>Godung Online</title>
	 <link rel="icon" type="image/gif" th:href="@{/images/logo_box.png}" />

	<!-- Bootstrap -->
    <link th:href="@{/vendors/bootstrap/dist/css/bootstrap.min.css}" rel="stylesheet">
    <!-- Font Awesome -->
    <link th:href="@{/vendors/font-awesome/css/font-awesome.min.css}" rel="stylesheet">
    <!-- NProgress -->
    <link th:href="@{/vendors/nprogress/nprogress.css}" rel="stylesheet">
    <!-- iCheck -->
    <link th:href="@{/vendors/iCheck/skins/flat/green.css}" rel="stylesheet">
    <!-- Datatables -->
    <link th:href="@{/vendors/datatables.net-bs/css/dataTables.bootstrap.min.css}" rel="stylesheet">
    <link th:href="@{/vendors/datatables.net-buttons-bs/css/buttons.bootstrap.min.css}" rel="stylesheet">
    <link th:href="@{/vendors/datatables.net-fixedheader-bs/css/fixedHeader.bootstrap.min.css}" rel="stylesheet">
    <link th:href="@{/vendors/datatables.net-responsive-bs/css/responsive.bootstrap.min.css}" rel="stylesheet">
    <link th:href="@{/vendors/datatables.net-scroller-bs/css/scroller.bootstrap.min.css}" rel="stylesheet">
    <!-- PNotify -->
	<link type="text/css" th:href="@{/vendors/pnotify/dist/pnotify.css}" rel="stylesheet">
	<link type="text/css" th:href="@{/vendors/pnotify/dist/pnotify.buttons.css}" rel="stylesheet">
	<link type="text/css" th:href="@{/vendors/pnotify/dist/pnotify.nonblock.css}" rel="stylesheet">
	<!-- Select2 -->
	<link type="text/css" th:href="@{/vendors/select2/dist/css/select2.min.css}" rel="stylesheet">
	 <!-- Switchery -->
    <link type="text/css" th:href="@{/vendors/switchery/dist/switchery.min.css}" rel="stylesheet">

    <!-- Custom Theme Style -->
    <link th:href="@{/build/css/custom.min.css}" rel="stylesheet">

	<!-- Main Theme Style -->
	<link type="text/css" th:href="@{/css/main.css}" rel="stylesheet">
	
</head>

<body class="nav-md">
	<div class="container body">
		<div class="main_container">
			
			<!-- menu -->	
			<div th:replace="fragments/menu:: menu"></div>
			<!-- /menu -->

			<!-- header -->	
			<div th:replace="fragments/header:: header"></div>
			<!-- /header -->

			<!-- page content -->
			<div class="right_col" role="main">
			
				<div class="col-md-12 col-sm-12 col-xs-12 x_panel search-head">
					<div class="title_left">
						<div class="col-md-6">
							<h2>
								<i th:class="${menu.icon}"></i> <span th:text="#{${menu.code}}"></span>
							</h2>
						</div>
					</div>
					<div class="title_right">
						<div class="form-group pull-right title_right_button">
						<!-- 	<button type="button" class="btn btn-success" onclick="openModalAdd();">
								<i class="fa" th:class="#{bt.icon.add}"></i>
								<span class="span_white" th:text="#{form.user.bt.add}"></span>
							</button> -->
						</div>
					</div>
				</div>
				
				<div class="row">
					<div class="col-md-12 col-sm-12 col-xs-12">
						<div class="x_panel">
								<div class="clearfix"></div>
								<div class="x_title x_title_edit">
									<div class="col-md-6 col-sm-6 col-xs-6">
										<h2><i class="fa fa-search"></i> <span th:text="#{label.search.label}"></span></h2>
									</div>
									<div class="col-md-6 col-sm-6 col-xs-6" style="padding-right: 5px;">
										<div id="bt-advance" class="pull-right search-advance-box">
											<i class="fa fa-filter"></i>
											<span th:text="#{label.search.advance}"></span>
										</div>
									</div>
									<div class="clearfix"></div>
								</div>

								<!-- Start Search Box  -->
								<div class="clearfix"></div>
									<div id="search-basic">
										
										<div class="col-md-6  col-md-offset-3 col-sm-6 col-xs-12">
											<div class="input-group">
												<input id="input_basic_search" type="text" class="form-control" th:placeholder="#{label.search.input}"> <span class="input-group-btn">
													<button id="bt_basic_search" type="button" class="btn btn-primary" th:text="#{bt.text.search}"></button>
												</span>
											</div>
											<div class="content-center">
												<span th:text="#{label.search.by}"></span> 
												<span th:text="#{form.user.label.email}"></span> ,
												<span th:text="#{form.user.label.name}"></span> ,
												<span th:text="#{form.user.label.language}"></span> 
											</div>
										</div>
									</div>
									<div id="search-advance" style="display: none;">
										<div class="col-md-12 col-sm-12 col-xs-12">
												<form autocomplete="off" class="form-horizontal form-label-left input_mask">
							                      <div class="col-md-6 col-sm-6 col-xs-12 form-group has-feedback">
							                       	<label class="control-label col-md-4 col-sm-4 col-xs-12" th:text="#{form.user.label.email}"></label>
							                         <div class="col-md-8 col-sm-8 col-xs-12">
							                         <input id="input_advance_email" type="text" class="form-control" >
							                         </div>
							                      </div>
							
							                      <div class="col-md-6 col-sm-6 col-xs-12 form-group has-feedback">
							                       <label class="control-label col-md-4 col-sm-4 col-xs-12" th:text="#{form.user.label.name}"></label>
							                        <div class="col-md-8 col-sm-8 col-xs-12">
							                          <input id="input_advance_name"  type="text" class="form-control" >
							                        </div>
							                      </div>
							                      
							                      <div class="col-md-6 col-sm-6 col-xs-12 form-group has-feedback">
							                       	<label class="control-label col-md-4 col-sm-4 col-xs-12" th:text="#{form.user.label.language}"></label>
							                         <div class="col-md-8 col-sm-8 col-xs-12">
							                          
							                          <select id="input_advance_language" style="width: 100%">
														<option value=" " th:text="#{dropdown.text.all}"></option>
														<option th:each="obj:${languageList}" th:value="${obj.value}" th:text="${obj.value}"></option>
													</select> 
							                          
							                         </div>
							                      </div>
							                      
							                       <div class="col-md-6 col-sm-6 col-xs-12 form-group has-feedback">
							                       	<label class="control-label col-md-4 col-sm-4 col-xs-12" th:text="#{form.user.label.active}"></label>
							                         <div class="col-md-8 col-sm-8 col-xs-12">
							                          
							                          <select id="input_advance_active" style="width: 100%">
														<option value=" " th:text="#{dropdown.text.all}"></option>
														<option th:text="#{active.yes}" value="1"></option>
														<option th:text="#{active.no}" value="0"></option>
													</select> 
							                          
							                         </div>
							                      </div>
							
							                      <div class="form-group">
							                        <div class="col-md-12 col-sm-12 col-xs-12" style="text-align:center;">
													   <button id="bt_advance_search" class="btn btn-primary" type="button"  th:text="#{bt.text.search}"></button>
													   <button id="bt_advance_reset" class="btn btn-default" type="button" th:text="#{bt.text.clear}"></button>
							                        </div>
							                      </div>
							                    </form>
										</div>
									</div>
								<!-- End Search Box  -->
							</div>
						</div>
						
						<div class="col-md-12 col-sm-12 col-xs-12">
							<div class="x_panel">
								<div class="x_title x_title_edit ">
									<h2><i class="fa fa-list"></i> <span th:text="#{form.user.label.list}"></span></h2>
									<div class="clearfix"></div>
								</div>
								<div class="x_content">
									<table id="datatablesMain" class="table table-striped table-bordered table-small" style="width:100%">
										<thead class="search-content-header">
											<tr>
												<th th:text="#{datatables.text.no}" class="dt-body-no"></th>
												<th th:text="#{form.user.label.email}" class="dt-body-code"></th>
												<th th:text="#{form.user.label.name}"></th>
												<th th:text="#{form.user.label.language}" class="dt-body-action"></th>
												<th></th>
												<th th:text="#{form.user.label.active}" class="dt-body-action"></th>
												<th th:text="#{datatables.text.action}" class="dt-body-action-three"></th>
											</tr>
										</thead>
									</table>
								</div>
							</div>
						</div>
					
				</div>
			</div>
			<!-- /page content -->


			<!-- ----------------------------- -->
			<!-- -------- Start Modal -------- -->
			<!-- ----------------------------- -->
			<div id="modal_save" class="modal fade"  tabindex="-1" role="dialog" aria-hidden="true" data-backdrop="static">
				<div class="modal-dialog">
					<div class="modal-content">

						<div class="modal-header modal-custom-header">
							<button type="button" class="close" data-dismiss="modal">
								<span aria-hidden="true">Ã—</span>
							</button>
							<h4 class="modal-title" id="myModalLabel">
								<i th:class="${menu.icon}"></i> <span th:text="#{${menu.code}}"></span>
							</h4>
						</div>
						
						<div class="profile_title">
	                        <div class="col-md-12">
	                          <i class="fa fa-info-circle"></i> <span th:text="#{form.user.lable.info}"></span>
	                        </div>
                      	</div>

						<form autocomplete="off" id="userModalForm" data-parsley-validate class="form-horizontal form-label-left">
							<div class="modal-body validation-box">
								<input type="hidden" id="userIdEncrypt" name="userIdEncrypt" >
								<div class="form-group">
									<div class="control-label col-md-3 col-sm-3 col-xs-12">
										<label th:text="#{form.user.label.email}"></label>
									</div>
									<div class="col-md-8 col-sm-8 col-xs-12">
										<input type="text" id="email" name="email" class="form-control">
										<label id="error_email" class="validation-message" style="display:none;"></label>
									</div>
								</div>
								<div class="form-group">
								
									<div class="control-label col-md-3 col-sm-3 col-xs-12">
										<label th:text="#{form.user.label.name}"></label>
										<label class="validation-message" th:text="#{label.request}"></label>
									</div>
									<div class="col-md-8 col-sm-8 col-xs-12">
										<input type="text" id="name" name="name" required="required" class="form-control">
										<label id="error_name" class="validation-message" style="display:none;"></label>
									</div>
								</div>
							
								 <div class="form-group">
									<div class="control-label col-md-3 col-sm-3 col-xs-12">
										<label th:text="#{form.profile.label.language}"></label> 
										<label class="validation-message" th:text="#{label.request}"></label>
									</div>
									<div class="col-md-8 col-sm-8 col-xs-12">
			                          <select  class="form-control" id="language" name="language">
			                            	<option th:each="common :${languageList}" 
					                            th:value="${common.key}" 
					                            th:text="${common.value}" >
		                          		</option>
			                          </select>
			                          <label id="error_language" class="validation-message" style="display:none;"></label>
									</div>
								  </div>
								
								  <div class="form-group">
									<div class="control-label col-md-3 col-sm-3 col-xs-12">
										<label th:text="#{form.user.label.active}"></label>
									</div>
									<div class="col-md-8 col-sm-8 col-xs-12 form-switch">
										<label><input type="checkbox" class="js-switch" id="active" name="active" value="1" /> </label>
										<label id="error_active" class="validation-message" style="display:none;"></label>
									</div>
								</div>
								
							</div>
	                      	
							<div class="clearfix"></div>
							<div class="modal-footer modal-custom-footer">
								<button type="button" class="btn btn-default" data-dismiss="modal">
									<i class="fa fa-close"></i> <span th:text="#{bt.text.close}"></span>
								</button>
								<button id="bt_save" type="button" class="btn btn-success" onclick="saveAction();">
									<i class="fa fa-save"></i> <span class="span_white" th:text="#{bt.text.save}"></span>
								</button>
							</div>
						</form>

					</div>
				</div>
			</div>
			
			<div id="modal_save_password" class="modal fade"  tabindex="-1" role="dialog" aria-hidden="true" data-backdrop="static">
				<div class="modal-dialog">
					<div class="modal-content">

						<div class="modal-header modal-custom-header">
							<button type="button" class="close" data-dismiss="modal">
								<span aria-hidden="true">Ã—</span>
							</button>
							<h4 class="modal-title" id="myModalLabel">
								<i th:class="${menu.icon}"></i> <span th:text="#{${menu.code}}"></span>
							</h4>
						</div>
						
						<div class="profile_title">
	                        <div class="col-md-12">
	                          <i class="fa fa-info-circle"></i> <span th:text="#{form.user.lable.info}"></span>
	                        </div>
                      	</div>

						<form autocomplete="off" id="userPasswordModalForm" data-parsley-validate class="form-horizontal form-label-left">
							<div class="modal-body validation-box">
								<input type="hidden" id="passwordUserIdEncrypt" name="userIdEncrypt" >
								  
								<div class="form-group">
									<div class="control-label col-md-3 col-sm-3 col-xs-12">
										<label th:text="#{form.user.label.password}"></label>
									</div>
									<div class="col-md-8 col-sm-8 col-xs-12">
										<input type="password" id="password" name="password" required="required" class="form-control">
										<label id="error_password" class="validation-message" style="display:none;"></label>
									</div>
								</div>
								  <div class="form-group">
									<div class="control-label col-md-3 col-sm-3 col-xs-12">
										<label th:text="#{form.register.password.confirm}"></label>
									</div>
									<div class="col-md-8 col-sm-8 col-xs-12">
										<input type="password" id="confirmPassword" name="confirmPassword" required="required" class="form-control">
										<label id="error_confirmPassword" class="validation-message" style="display:none;"></label>
									</div>
								</div>
							</div>
	                      	
							<div class="clearfix"></div>
							<div class="modal-footer modal-custom-footer">
								<button type="button" class="btn btn-default" data-dismiss="modal">
									<i class="fa fa-close"></i> <span th:text="#{bt.text.close}"></span>
								</button>
								<button id="bt_save" type="button" class="btn btn-success" onclick="savePasswordAction();">
									<i class="fa fa-save"></i> <span class="span_white" th:text="#{bt.text.save}"></span>
								</button>
							</div>
						</form>

					</div>
				</div>
			</div>
			
			
			
			 <div id="modal_delete" class="modal fade " tabindex="-1" role="dialog" aria-hidden="true" data-backdrop="static">
                    <div class="modal-dialog ">
                      <div class="modal-content">

                        <div class="modal-header modal-delete-header">
                          <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">Ã—</span>
                          </button>
                          <h4 class="modal-title" id="myModalLabel">
								<i class="fa fa-trash"></i> <span th:text="#{label.delete.head.confirm}"></span>
							</h4>
                        </div>
                        <div class="modal-body">
                        		<form autocomplete="off" id="deleteForm" data-parsley-validate class="form-horizontal form-label-left">
                        			<input type="hidden" id="delete_id" name="userIdEncrypt" />
                        			<span id="modal_delete_content"></span>
                        		</form>
                        </div>
                        <div class="modal-footer">
                         <button type="button" class="btn btn-default" data-dismiss="modal">
							<i class="fa fa-close"></i> <span th:text="#{bt.text.close}"></span>
						 </button>
                          <button type="button" class="btn btn-danger" onclick="deleteAction();">
							<i class="fa fa-trash"></i> <span class="span_white" th:text="#{bt.text.delete}"></span>
						</button>
                        </div>

                      </div>
                    </div>
                  </div>
			
			<!-- --------------------------- -->
			<!-- -------- End Modal -------- -->
			<!-- --------------------------- -->

			<!-- footer content -->
			<div th:replace="fragments/footer:: footer"></div>
			<!-- /footer content -->
		</div>
	</div>

	 <!-- jQuery -->
    <script th:src="@{/vendors/jquery/dist/jquery.min.js}"></script>
    <!-- Bootstrap -->
    <script th:src="@{/vendors/bootstrap/dist/js/bootstrap.min.js}"></script>
    <!-- FastClick -->
    <script th:src="@{/vendors/fastclick/lib/fastclick.js}"></script>
    <!-- NProgress -->
    <script th:src="@{/vendors/nprogress/nprogress.js}"></script>
    <!-- iCheck -->
    <script th:src="@{/vendors/iCheck/icheck.min.js}"></script>
    <!-- Datatables -->
    <script th:src="@{/vendors/datatables.net/js/jquery.dataTables.min.js}"></script>
    <script th:src="@{/vendors/datatables.net-bs/js/dataTables.bootstrap.min.js}"></script>
    <script th:src="@{/vendors/datatables.net-buttons/js/dataTables.buttons.min.js}"></script>
    <script th:src="@{/vendors/datatables.net-buttons-bs/js/buttons.bootstrap.min.js}"></script>
    <script th:src="@{/vendors/datatables.net-buttons/js/buttons.flash.min.js}"></script>
    <script th:src="@{/vendors/datatables.net-buttons/js/buttons.html5.min.js}"></script>
    <script th:src="@{/vendors/datatables.net-buttons/js/buttons.print.min.js}"></script>
    <script th:src="@{/vendors/datatables.net-fixedheader/js/dataTables.fixedHeader.min.js}"></script>
    <script th:src="@{/vendors/datatables.net-keytable/js/dataTables.keyTable.min.js}"></script>
    <script th:src="@{/vendors/datatables.net-responsive/js/dataTables.responsive.min.js}"></script>
    <script th:src="@{/vendors/datatables.net-responsive-bs/js/responsive.bootstrap.js}"></script>
    <script th:src="@{/vendors/datatables.net-scroller/js/dataTables.scroller.min.js}"></script>
    <script th:src="@{/vendors/jszip/dist/jszip.min.js}"></script>
    <script th:src="@{/vendors/pdfmake/build/pdfmake.min.js}"></script>
    <script th:src="@{/vendors/pdfmake/build/vfs_fonts.js}"></script>
    	<!-- PNotify -->
    <script th:src="@{/vendors/pnotify/dist/pnotify.js}"></script>
    <script th:src="@{/vendors/pnotify/dist/pnotify.buttons.js}"></script>
    <script th:src="@{/vendors/pnotify/dist/pnotify.nonblock.js}"></script>
    <!-- Select2 -->
    <script th:src="@{/vendors/select2/dist/js/select2.full.min.js}"></script>
      <!-- Switchery -->
    <script th:src="@{/vendors/switchery/dist/switchery.min.js}"></script>

    <!-- Custom Theme Scripts -->
    <script th:src="@{/build/js/custom.js}"></script>
	
	<!-- Custom Theme Scripts -->
	<script th:src="@{/js/godung.js}"></script>
	

	<script th:inline="javascript">
		var url_language = /*[[#{javascript.datatable.language.url}]]*/;
		var url_user = /*[[@{/admin/user/list}]]*/;
		var textView = /*[[#{bt.text.view}]]*/;
		var textEdit = /*[[#{bt.text.edit}]]*/;
		var textChangePassword = /*[[#{tooltip.changepassword}]]*/;
		var textDelete = /*[[#{bt.text.delete}]]*/;
		var active_yes = /*[[#{active.yes}]]*/;
		var active_no = /*[[#{active.no}]]*/;
		
		<!-- --------------------------------------- -->
		<!-- -------- Start datatables Main -------- -->
		<!-- --------------------------------------- -->
	    $(document).ready(function() {
		    	var table =  $('#datatablesMain').DataTable( {
		    			"processing": true,
		    	        "ajax": url_user,
		    	        "paging":   true,
		    	        "ordering": true,
		    	        "info":     true,
		    	        "searching":	true,
		    	        "language": {"url": url_language},
		    	        "order": [[ 1, 'asc' ]],
		    	        "columns": [
		  	        		{ 'data': null ,'className': 'dt-body-no','searchable': false, 'orderable': false },
		  	            { 'data': 'email' },
		  	            { 'data': 'name' },
		  	            { 'data': 'language' ,"className": "content-center" ,'orderable': false },
		  	            { 'data': 'active' ,'className': 'dt-body-action', 'orderable': false ,'visible': false},
		  	            { 'data': null ,'className': 'dt-body-action','searchable': false, 'orderable': false },
		  	            { 'data': 'userIdEncrypt' ,'className': 'dt-body-action-three','searchable': false, 'orderable': false }
		  	        ],
		  	      	"columnDefs": [
		  	      		{
		                  "render": function ( data, type, row ) {
		                		 return	'' +
		                		        '<button type="button" class="btn btn-primary btn-xs" data-toggle="tooltip" data-placement="top" title="'+ textEdit + '" ' +
		                	  	 	    'onclick="loadAction(\''+data+'\');">' +
		                	  	 	    '<i class="fa fa-wrench"></i></button>' + 
		                	  	 	    ' ' +
		                	  	 	 	'<button type="button" class="btn btn-primary btn-xs" data-toggle="tooltip" data-placement="top" title="'+ textChangePassword + '" ' +
		                	  	 	    'onclick="openModalPasswordForm(\''+data+'\');">' +
		                	  	 	    '<i class="fa fa-key"></i></button>' + 
		                	  	 	    ' ' +
		                	  	 	    '<button type="button" class="btn btn-danger btn-xs" data-toggle="tooltip" data-placement="top" title="'+ textDelete + '" ' +
		                	  	 	    'onclick="openModalDelete(\''+data+'\',\''+row.email+ ' ' +row.name+ '\');" >' + 
		                		        '<i class="fa fa-trash"></i></button>';
		                  },
		                  "targets": 6
		            	 	},
		            	 	{
		            	 		"targets": 5,
		            	 		"className": "content-center",
		            	 		 "render": function ( data, type, row ) {
		            	 			 if(row.active == 1){
		            	 				 return '<input type="hidden" value="1"><button type="button" class="btn btn-success btn-xs">'+active_yes+'</button>';
		            	 			 }else{
		            	 				 return '<input type="hidden" value="0"><button type="button" class="btn btn-danger btn-xs">'+active_no+'</button>';
		            	 			 }
		            	 		 }
		            	 	}
		  	      	],
		             "initComplete": function( settings, json ) {
		            	 		//fix bug datatables use dom not responsive html
		            			 $("#datatablesMain_filter").hide();
		           		}
		    	    } );
	    	
		    		/* SET RELOAD TOOLTIP AFTER DATATABLE */
			    	$('#datatablesMain').on( 'draw.dt', function () {
			    		$('[data-toggle="tooltip"]').tooltip();
			    	} );
	        
		       /* SET INDEX COLUMN */
		        table.on( 'order.dt search.dt', function () {
		        	table.column(0, {search:'applied', order:'applied'}).nodes().each( function (cell, i) {
		                cell.innerHTML = i+1;
		            } );
		        } ).draw(); 
	        
		       /* SET SHOW HIDE ADVENCE SEARCH */
		        var searchBasic = 0;
		        $("#bt-advance").click(function(){
			        	if(searchBasic == 0){
			        		searchBasic = 1;
			        		$("#search-basic").hide();
			        		$("#search-advance").show();
			        	}else{
			        		searchBasic=0;
			        		$("#search-advance").hide();
			        		$("#search-basic").show();
			        	}
		        });
		        
		        /* BASIC SEARCH */
		        $('#bt_basic_search').on( 'click', function () {
		        		table.search($("#input_basic_search").val()).draw();
				});
		        
		        $('#input_basic_search').on( 'keyup change', function () {
			    		table.search($("#input_basic_search").val()).draw();
				});
		        
		        /* ADVANCE SEARCH */
		        $('#input_advance_email,#input_advance_name,#input_advance_language,#input_advance_active').on( 'keyup change', function () {
		       	 	searchDatatablesMain();
				});
		        
		        $('#bt_advance_search').on( 'click', function () {
		        		searchDatatablesMain();
		        });
		        
		        $('#bt_advance_reset').on( 'click', function () {
		        		$("#input_advance_email").val("");
		        		$("#input_advance_name").val("");
		        		
		        		$('#input_advance_language').val(" "); // Change the value or make some change to the internal state
		    			$('#input_advance_language').trigger('change.select2'); // Notify only Select2 of changes
		    			
		    			$('#input_advance_active').val(" "); // Change the value or make some change to the internal state
		    			$('#input_advance_active').trigger('change.select2'); // Notify only Select2 of changes
			    		searchDatatablesMain();
			    });
		});
		
		function searchDatatablesMain(){
	   		var table = $('#datatablesMain').DataTable();
	    		table.columns(1).search($("#input_advance_email").val()).columns(2).search($("#input_advance_name").val()).columns(3).search($("#input_advance_language").val()).columns(4).search($("#input_advance_active").val()).draw();
	    }
		<!-- ------------------------------------- -->
		<!-- -------- End datatables Main -------- -->
		<!-- ------------------------------------- -->
		
		$(function(){
			var selectText = /*[[#{dropdown.text.select}]]*/;
	      	$('#input_advance_language').select2({
	    	  		placeholder: selectText
	     	 });
	      	
	      	$('#input_advance_active').select2({
	    	  		placeholder: selectText
	     	 });
	    }); 
		
	    <!-- -------------------------------- -->
		<!-- -------- Start Modal ----------- -->
		<!-- -------------------------------- -->
		function openModalDelete(id,message){
	    		var messageMain = /*[[#{label.delete.content.confirm}]]*/;
	    		$("#delete_id").val(id);
	    		$("#modal_delete_content").html(messageMain + " : " + message);
	    		$('#modal_delete').modal('show');
	    }
		
		function openModalMainDelete(){
			var messageMain = /*[[#{label.delete.content.confirm}]]*/;
			var id = $("#userIdEncrypt").val();
			var code = $("#email").val();
			var name = $("#name").val();
			var message = code + " " + name;
			
			$("#delete_id").val(id);
    			$("#modal_delete_content").html(messageMain + " : " + message);
    			$('#modal_delete').modal('show');
		}
		
	 	function resetModalForm(){
			$("#userIdEncrypt").val("");
	   		$("#email").val("");
		   	$("#name").val("");
		   	$('#userChildDatatable').DataTable().clear().draw();
		   	resetValidationError();
	    }
	 	
	 	function setModalForm(id,email,name,active,language){
	 		$("#userIdEncrypt").val(id);
        		$("#email").val(email);
     		$("#name").val(name);
     	   	$("#language").val(language);

     		var element = $('#active');
     	   	if(active == 1){
     	   		changeSwitchery(element, true);
     	   	}else{
     	     	changeSwitchery(element, false);
     	   	}
	 	}
	 	
	 	function resetModalPasswordForm(){
	 		$("#passwordUserIdEncrypt").val("");
	 		$("#password").val("");
	 		$("#confirmPassword").val("");
	 		resetValidationError();
	 	}
	 	
	 	function openModalPasswordForm(id){
	 		resetModalPasswordForm();
	 		$("#passwordUserIdEncrypt").val(id);
	 		$('#modal_save_password').modal('show');
	 	}
	 	
	 	
	 	function changeSwitchery(element, checked) {
	 		  if ( ( element.is(':checked') && checked == false ) || ( !element.is(':checked') && checked == true ) ) {
	 		    element.parent().find('.switchery').trigger('click');
	 		  }
	 		}
		<!-- -------------------------------- -->
		<!-- -------- End Modal ----------- -->
		<!-- -------------------------------- -->
	    
	    
	    <!-- -------------------------------- -->
		<!-- -------- Start Action -------- -->
		<!-- -------------------------------- -->
	    function saveAction() {
	    		resetValidationError();
	 	   	var urlAction = /*[[@{/admin/user/save}]]*/;
		    $.ajax({
		        type: "POST",
		        url: urlAction,
		        dataType: 'json',
		        data: $("#userModalForm").serialize(),
		        success: function(response){
		            if(response.status == "SUCCESS"){
		               	openNotification(response.result.type,response.result.title,response.result.text);
		               	$('#modal_save').modal('hide');
		               	$("#userModalForm").trigger('reset');
		              	var table =  $('#datatablesMain').DataTable();
		                table.ajax.reload();
		             }else{
		            	 	validationErrorShow(response.result);
		             }
		         },
		         error: function(e){
		             openNotification("error","error",e);
		         }
		    });
		}
	    
	    function savePasswordAction() {
    		resetValidationError();
 	   	var urlAction = /*[[@{/admin/user/changepassword}]]*/;
	    $.ajax({
	        type: "POST",
	        url: urlAction,
	        dataType: 'json',
	        data: $("#userPasswordModalForm").serialize(),
	        success: function(response){
	            if(response.status == "SUCCESS"){
	               	openNotification(response.result.type,response.result.title,response.result.text);
	               	$('#modal_save_password').modal('hide');
	               	$("#userPasswordModalForm").trigger('reset');
	              	var table =  $('#datatablesMain').DataTable();
	                table.ajax.reload();
	             }else{
	            	 	validationErrorShow(response.result);
	             }
	         },
	         error: function(e){
	             openNotification("error","error",e);
	         }
	    });
	}
	    
	    function deleteAction() {
	 	   	var urlAction = /*[[@{/admin/user/delete}]]*/;
		    $.ajax({
		        type: "POST",
		        url: urlAction,
		        dataType: 'json',
		        data: $("#deleteForm").serialize(),
		        success: function(response){
		            if(response.status == "SUCCESS"){
		               	openNotification(response.result.type,response.result.title,response.result.text);
		               	$('#modal_delete').modal('hide');
	            			$('#modal_save').modal('hide');
		               	$("#userModalForm").trigger('reset');
		              	var table =  $('#datatablesMain').DataTable();
		                table.ajax.reload();
		             }else{
		            		openNotification(response.result.type,response.result.title,response.result.text);
		             }
		         },
		         error: function(e){
		             openNotification("error","error",e);
		         }
		    });
		}
	    
	    function loadAction(id) {
	    		resetModalForm();
	 	   	var urlAction = /*[[@{/admin/user/load}]]*/;
		    $.ajax({
		        type: "GET",
		        url: urlAction,
		        dataType: 'json',
		        data: {"userIdEncrypt": id},
		        success: function(response){
		            if(response.status == "SUCCESS"){
			        	   var id = response.result.userIdEncrypt;
			        	   var email = response.result.email;
			        	   var name = response.result.name;
			        	   var active = response.result.active;
			        	   var language = response.result.language;
			        	   
			        	   setModalForm(id,email,name,active,language);
		               $('#modal_save').modal('show');
		             }else{
		            		openNotification(response.result.type,response.result.title,response.result.text);
		             }
		         },
		         error: function(e){
		             openNotification("error","error",e);
		         }
		    });
		}
	    
	    function openModalAdd(){
 			resetModalForm();
	    		var urlAction = /*[[@{/admin/user/load}]]*/;
    		    $.ajax({
    		        type: "GET",
    		        url: urlAction,
    		        dataType: 'json',
    		        success: function(response){
    		            if(response.status == "SUCCESS"){
    		            	//$("#bt_delete").hide();
    		               $('#modal_save').modal('show');
    		             }else{
    		            		openNotification(response.result.type,response.result.title,response.result.text);
    		             }
    		         },
    		         error: function(e){
    		             openNotification("error","error",e);
    		         }
    		    });
	    }
	    <!-- -------------------------------- -->
		<!-- ---------- End Action ---------- -->
		<!-- -------------------------------- -->
	  
	</script>

</body>
</html>
